<footer class="site-footer">
    {{ partial "navigation.html" . }}
    <div class="center noprint">
        Â©Charles Marttinen
    </div>
    <div class="center noprint">
        Colour scheme:
        <div class="segmented-control">
            <div class="segmented-control__segment">
                <input type="radio" name="color-scheme" id="color-scheme-light"
                    value="light" />
                <label for="color-scheme-light">light</label>
            </div>
            <div class="segmented-control__segment">
                <input type="radio" name="color-scheme" id="color-scheme-dark"
                    value="dark" />
                <label for="color-scheme-dark">dark</label>
            </div>
            <div class="segmented-control__segment">
                <input type="radio" name="color-scheme" id="color-scheme-auto"
                    value="auto" />
                <label for="color-scheme-auto"
                    title="Follow system or browser preference">match system</label>
            </div>
        </div>
    </div>
    <div class="center"></div>
</footer>

<script>
    const colorScheme = new ColorSchemeSwitcher();
    const inputElements = document.getElementsByName("color-scheme");

    function updateState() {
        for (const input of inputElements) {
            const checked = (colorScheme.get() === input.value);
            input.checked = checked;

            // Add a hook for styling
            input.parentElement.classList.toggle("checked", checked);
        }
    }

    function handleChange(event) {
        colorScheme.set(event.target.value);
        updateState();
    }
    for (const el of inputElements) {
        el.addEventListener("change", handleChange);
    }

    updateState();
</script>